<html>
	<head>
		<script src="http://code.jquery.com/jquery-1.9.1.js">
		</script>
		<script src="http://code.jquery.com/ui/1.10.3/jquery-ui.js">
		</script>

 <style>
  .div { width: 150px; height: 150px; padding: 0.5em; }
  img { border: 1px solid #999999;}
  </style>
		<script>
	var lastLoad = new Date();
	function processImages(data)
	{
        lastLoad = new Date();
		for(var i = 0; i < data.images.length; i++)
		{
			var image = data.images[i];
            var id = "id" + image.fileName.hashCode();
			var element = $("#"+id);
			if(element.length == 0)
			{
				var html = '<div id="'+id+'" class="ui-widget-content" ><img src="' + image.imageUrl + '"><p contenteditable="true">' + image.fileName +'</p></div> &nbsp;' ;
				$( ".inner" ).append(html );
			}
			else
			{
				element.find("img").attr("src", image.imageUrl);
			}
		} 
		$("div").draggable();
	}
    String.prototype.hashCode = function(){
    var hash = 0, i, char;
    if (this.length == 0) return hash;
    for (i = 0, l = this.length; i < l; i++) {
        char  = this.charCodeAt(i);
        hash  = ((hash<<5)-hash)+char;
        hash |= 0; // Convert to 32bit integer
    }
    return hash;
};
	function updateTime()
	{
		var now=new Date(); 
		var seconds=Math.round((now.getTime()-lastLoad.getTime())/1000);
		$("#timer").html('last loaded ' + seconds + ' second ago');
	}
	function loadData()
	{
		$.getJSON("/ScreenShots",processImages);
	}
    $(document).ready(loadData);
    setInterval(updateTime, 1000);
	setInterval(loadData, 10000);
    </script>
	</head>
	<body class="inner">
        &nbsp;
<div id="timer">
</div>
		</body>
	</html>